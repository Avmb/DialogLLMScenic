{
  "docstring": "TITLE: Bypassing 01\nAUTHOR: Francis Indaheng, findaheng@berkeley.edu\nDESCRIPTION: Ego vehicle performs a lane change to bypass a slow \nadversary vehicle before returning to its original lane.\nSOURCE: NHSTA, #16",
  "has_docstring": true,
  "body": "#################################\n# MAP AND MODEL                 #\n#################################\n\nparam map = localPath('../../../../tests/formats/opendrive/maps/CARLA/Town03.xodr')\nparam carla_map = 'Town03'\nmodel scenic.simulators.carla.model\n\n#################################\n# CONSTANTS                     #\n#################################\n\nMODEL = 'vehicle.lincoln.mkz2017'\n\nparam EGO_SPEED = VerifaiRange(7, 10)\n\nparam ADV_DIST = VerifaiRange(10, 25)\nparam ADV_SPEED = VerifaiRange(2, 4)\n\nBYPASS_DIST = [15, 10]\nINIT_DIST = 50\nTERM_TIME = 5\n\n#################################\n# AGENT BEHAVIORS               #\n#################################\n\nbehavior EgoBehavior():\n\ttry:\n\t\tdo FollowLaneBehavior(target_speed=globalParameters.EGO_SPEED)\n\tinterrupt when withinDistanceToAnyObjs(self, BYPASS_DIST[0]):\n\t\tfasterLaneSec = self.laneSection.fasterLane\n\t\tdo LaneChangeBehavior(\n\t\t\t\tlaneSectionToSwitch=fasterLaneSec,\n\t\t\t\ttarget_speed=globalParameters.EGO_SPEED)\n\t\tdo FollowLaneBehavior(\n\t\t\t\ttarget_speed=globalParameters.EGO_SPEED,\n\t\t\t\tlaneToFollow=fasterLaneSec.lane) \\\n\t\t\tuntil (distance to adversary) > BYPASS_DIST[1]\n\t\tslowerLaneSec = self.laneSection.slowerLane\n\t\tdo LaneChangeBehavior(\n\t\t\t\tlaneSectionToSwitch=slowerLaneSec,\n\t\t\t\ttarget_speed=globalParameters.EGO_SPEED)\n\t\tdo FollowLaneBehavior(target_speed=globalParameters.EGO_SPEED) for TERM_TIME seconds\n\t\tterminate \n\n#################################\n# SPATIAL RELATIONS             #\n#################################\n\ninitLane = Uniform(*network.lanes)\negoSpawnPt = OrientedPoint in initLane.centerline\n\n#################################\n# SCENARIO SPECIFICATION        #\n#################################\n\nego = Car at egoSpawnPt,\n\twith blueprint MODEL,\n\twith behavior EgoBehavior()\n\nadversary = Car following roadDirection for globalParameters.ADV_DIST,\n\twith blueprint MODEL,\n\twith behavior FollowLaneBehavior(target_speed=globalParameters.ADV_SPEED)\n\nrequire (distance to intersection) > INIT_DIST\nrequire (distance from adversary to intersection) > INIT_DIST\nrequire always (adversary.laneSection._fasterLane is not None)"
}